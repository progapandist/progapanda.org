{"id":"../node_modules/xterm/lib/utils/CharMeasure.js","dependencies":[{"name":"/Users/andybarnov/code/progapandist/rnd/webterm/node_modules/xterm/lib/utils/CharMeasure.js.map","includedInParent":true,"mtime":1587222920480},{"name":"/Users/andybarnov/code/progapandist/rnd/webterm/node_modules/xterm/src/utils/CharMeasure.ts","includedInParent":true,"mtime":1587222920480},{"name":"/Users/andybarnov/code/progapandist/rnd/webterm/package.json","includedInParent":true,"mtime":1587223993374},{"name":"/Users/andybarnov/code/progapandist/rnd/webterm/node_modules/xterm/package.json","includedInParent":true,"mtime":1586604134482},{"name":"../EventEmitter.js","loc":{"line":13,"column":32},"parent":"/Users/andybarnov/code/progapandist/rnd/webterm/node_modules/xterm/lib/utils/CharMeasure.js","resolved":"/Users/andybarnov/code/progapandist/rnd/webterm/node_modules/xterm/lib/EventEmitter.js"}],"generated":{"js":"\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventEmitter_js_1 = require(\"../EventEmitter.js\");\nvar CharMeasure = (function (_super) {\n    __extends(CharMeasure, _super);\n    function CharMeasure(document, parentElement) {\n        var _this = _super.call(this) || this;\n        _this._document = document;\n        _this._parentElement = parentElement;\n        return _this;\n    }\n    Object.defineProperty(CharMeasure.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CharMeasure.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CharMeasure.prototype.measure = function () {\n        var _this = this;\n        if (!this._measureElement) {\n            this._measureElement = this._document.createElement('span');\n            this._measureElement.style.position = 'absolute';\n            this._measureElement.style.top = '0';\n            this._measureElement.style.left = '-9999em';\n            this._measureElement.textContent = 'W';\n            this._measureElement.setAttribute('aria-hidden', 'true');\n            this._parentElement.appendChild(this._measureElement);\n            setTimeout(function () { return _this._doMeasure(); }, 0);\n        }\n        else {\n            this._doMeasure();\n        }\n    };\n    CharMeasure.prototype._doMeasure = function () {\n        var geometry = this._measureElement.getBoundingClientRect();\n        if (geometry.width === 0 || geometry.height === 0) {\n            return;\n        }\n        if (this._width !== geometry.width || this._height !== geometry.height) {\n            this._width = geometry.width;\n            this._height = geometry.height;\n            this.emit('charsizechanged');\n        }\n    };\n    return CharMeasure;\n}(EventEmitter_js_1.EventEmitter));\nexports.CharMeasure = CharMeasure;\n\n\n"},"sourceMaps":{"js":{"version":3,"sources":["../src/utils/CharMeasure.ts"],"names":[],"mappings":";;;;;;;;;;;;AAKA,sDAAkD;AAKlD;IAAiC,+BAAY;IAO3C,qBAAY,QAAkB,EAAE,aAA0B;QAA1D,YACE,iBAAO,SAGR;QAFC,KAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC1B,KAAI,CAAC,cAAc,GAAG,aAAa,CAAC;;IACtC,CAAC;IAED,sBAAW,8BAAK;aAAhB;YACE,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACrB,CAAC;;;OAAA;IAED,sBAAW,+BAAM;aAAjB;YACE,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC;QACtB,CAAC;;;OAAA;IAEM,6BAAO,GAAd;QAAA,iBAeC;QAdC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;YAC1B,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;YAC5D,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;YACjD,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC;YACrC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,GAAG,SAAS,CAAC;YAC5C,IAAI,CAAC,eAAe,CAAC,WAAW,GAAG,GAAG,CAAC;YACvC,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;YACzD,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAGtD,UAAU,CAAC,cAAM,OAAA,KAAI,CAAC,UAAU,EAAE,EAAjB,CAAiB,EAAE,CAAC,CAAC,CAAC;QACzC,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC;IACH,CAAC;IAEO,gCAAU,GAAlB;QACE,IAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,qBAAqB,EAAE,CAAC;QAG9D,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,KAAK,CAAC,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;YAClD,MAAM,CAAC;QACT,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,MAAM,KAAK,QAAQ,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,KAAK,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;YACvE,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,KAAK,CAAC;YAC7B,IAAI,CAAC,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC;YAC/B,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC/B,CAAC;IACH,CAAC;IACH,kBAAC;AAAD,CAnDA,AAmDC,CAnDgC,8BAAY,GAmD5C;AAnDY,kCAAW","file":"CharMeasure.js","sourceRoot":"..","sourcesContent":["/**\n * @module xterm/utils/CharMeasure\n * @license MIT\n */\n\nimport { EventEmitter } from '../EventEmitter.js';\n\n/**\n * Utility class that measures the size of a character.\n */\nexport class CharMeasure extends EventEmitter {\n  private _document: Document;\n  private _parentElement: HTMLElement;\n  private _measureElement: HTMLElement;\n  private _width: number;\n  private _height: number;\n\n  constructor(document: Document, parentElement: HTMLElement) {\n    super();\n    this._document = document;\n    this._parentElement = parentElement;\n  }\n\n  public get width(): number {\n    return this._width;\n  }\n\n  public get height(): number {\n    return this._height;\n  }\n\n  public measure(): void {\n    if (!this._measureElement) {\n      this._measureElement = this._document.createElement('span');\n      this._measureElement.style.position = 'absolute';\n      this._measureElement.style.top = '0';\n      this._measureElement.style.left = '-9999em';\n      this._measureElement.textContent = 'W';\n      this._measureElement.setAttribute('aria-hidden', 'true');\n      this._parentElement.appendChild(this._measureElement);\n      // Perform _doMeasure async if the element was just attached as sometimes\n      // getBoundingClientRect does not return accurate values without this.\n      setTimeout(() => this._doMeasure(), 0);\n    } else {\n      this._doMeasure();\n    }\n  }\n\n  private _doMeasure(): void {\n    const geometry = this._measureElement.getBoundingClientRect();\n    // The element is likely currently display:none, we should retain the\n    // previous value.\n    if (geometry.width === 0 || geometry.height === 0) {\n      return;\n    }\n    if (this._width !== geometry.width || this._height !== geometry.height) {\n      this._width = geometry.width;\n      this._height = geometry.height;\n      this.emit('charsizechanged');\n    }\n  }\n}\n"]}},"error":null,"hash":"75e7f60f302c4ff22d243a45b371569a","cacheData":{"env":{}}}